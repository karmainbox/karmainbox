 <html lang="en">
     <head>
       <meta charset="UTF-8" />
       <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
       <title>KarmaInbox</title>
       <style>
         body {
           font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
           background-color: #fff;
           color: #111;
           max-width: 720px;
           margin: 40px auto;
           padding: 0 20px;
           line-height: 1.6;
         }
         h1, h2 {
           font-weight: 600;
         }
         .quote {
           margin: 20px 0;
           padding-left: 12px;
           border-left: 3px solid #eee;
           font-style: italic;
         }
         footer {
           margin-top: 60px;
           font-size: 0.9em;
           color: #666;
         }
         a {
           color: #000;
           text-decoration: underline;
         }
         .ascii-banner {
           max-width: 100%;
           height: auto;
           margin-bottom: 24px;
         }
         .video-container {
           position: relative;
           padding-bottom: 56.25%;
           height: 0;
           overflow: hidden;
           margin: 24px 0;
         }
         .video-container iframe {
           position: absolute;
           top:0;
           left:0;
           width:100%;
           height:100%;
           border:0;
         }
         .cta-button {
           display: inline-block;
           background: #111;
           color: #fff;
           padding: 10px 18px;
           border-radius: 6px;
           text-decoration: none;
           font-weight: 500;
           margin-bottom: 24px;
         }
         .cta-button:hover {
           background: #333;
         }

         /* Checkout loading styles */
         .checkout-loading {
           display: none;
           text-align: center;
           margin: 40px 0;
           padding: 20px;
           background: #f8f9fa;
           border-radius: 8px;
         }

         .checkout-success {
           display: none;
           text-align: center;
           margin: 40px 0;
           padding: 20px;
           background: #d4edda;
           color: #155724;
           border: 1px solid #c3e6cb;
           border-radius: 8px;
         }

         .checkout-error {
           display: none;
           text-align: center;
           margin: 40px 0;
           padding: 20px;
           background: #f8d7da;
           color: #721c24;
           border: 1px solid #f5c6cb;
           border-radius: 8px;
         }
         .support-section {
          background: #f8f9fa;
          padding: 20px;
          border-radius: 8px;
          margin: 30px 0;
        }
       </style>
      <link rel="icon" type="image/png" sizes="128x128" href="icon128.png">
     </head>
     <body>

       <!-- ASCII Art Logo -->
       <img src="karmainbox-ascii-art.png" alt="KarmaInbox ASCII Logo" class="ascii-banner" />

       <!-- Checkout Status Messages -->
       <div id="checkoutLoading" class="checkout-loading">
         <h2>üîÑ Please complete the payment for KarmaInbox Pro</h2>
         <p>Please use your primary account email address in payment form. Your paid account will be connected to the mentioned email address</p>
       </div>

       <div id="checkoutSuccess" class="checkout-success">
         <h2>‚úÖ Payment Successful!</h2>
         <p>Thank you for upgrading to KarmaInbox Pro! Your premium features are now active.</p>
         <p><a href="#" onclick="closeCheckoutAndReturnToExtension()">Return to Extension</a></p>
       </div>

       <div id="checkoutError" class="checkout-error">
         <h2>‚ùå Checkout Error</h2>
         <p id="errorMessage">There was an issue with your checkout. Please try again.</p>
         <p><a href="#" onclick="closeCheckoutAndReturnToExtension()">Return to Extension</a></p>
       </div>

       <!-- Main Content -->
       <div id="mainContent">
         <p>Prioritize your Gmail like a pro.</p>
         <p>KarmaInbox is a Chrome extension that ranks your emails based on importance, gives AI-generated
     summaries, and helps you focus on what matters most.</p>
         <p>If your inbox feels like chaos, KarmaInbox is the calm filter you didn't know you needed.</p>

         <!-- Install CTA -->
         <p>
           <a class="cta-button"
     href="https://chromewebstore.google.com/detail/karma-inbox/laaeppijnpidcopjgjionfgjlmpjijol?pli=1"
     target="_blank">
             Install from Chrome Web Store
           </a>
         </p>

         <!-- Demo Video -->
         <h2>Watch the Demo</h2>
         <div class="video-container">
           <iframe src="https://www.youtube.com/embed/f6Db5IerM78" title="KarmaInbox Walkthrough"
     allowfullscreen></iframe>
         </div>

         <h2>Why KarmaInbox?</h2>
         <ul>
           <li>Smart scoring system for email priority</li>
           <li>AI-powered summaries using GPT, Claude, Gemini & more</li>
           <li>Multi-account Gmail support</li>
           <li>Secure & encrypted, with zero data leakage</li>
         </ul>

         <h2>What people are saying</h2>
         <div class="quote">"I just want this to be built into Gmail forever." ‚Äî Early user</div>
         <div class="quote">"It's like having a chief of staff for your inbox." ‚Äî Beta tester</div>
         <div class="quote">"Tried it out and it instantly cleared 70% of my mental load." ‚Äî Startup founder</div>

         <h2>How it works</h2>
         <ol>
           <li>Install KarmaInbox from the Chrome Web Store</li>
           <li>Connect your Gmail account securely</li>
           <li>Watch your inbox reorganize itself by importance</li>
           <li>Skim summaries instead of threads</li>
         </ol>

         <h2>FAQ</h2>
         <p><strong>Is my data safe?</strong><br>
         Yes. KarmaInbox uses OAuth 2.0 and stores everything locally in your browser with encryption.</p>
         <p><strong>Which email accounts are supported?</strong><br>
         Any Gmail account ‚Äî personal or Google Workspace.</p>
         <p><strong>What AI does it use?</strong><br>
         You can bring your own API keys for OpenAI, Claude, Gemini, or Ollama.</p>

         <!-- Support Section -->
        <div class="support-section">
          <h2>Need Help?</h2>
          <p><strong>Support:</strong> Reach out to us at <a href="mailto:karmamailinbox@gmail.com">karmamailinbox@gmail.com</a></p>
<p><strong>Feedback:</strong> We'd love to hear from you! <a href="https://app.youform.com/forms/admzpkir" target="_blank">Share your feedback</a></p>
        </div>

         <footer>
           <p>¬© 2025 KarmaInbox / Augmentos</p>
           <p>
             <a href="https://karmainbox.github.io/privacy-policy">Privacy Policy</a> ¬∑
             <a href="https://karmainbox.github.io/terms-of-service">Terms of Service</a> ¬∑
             <a href="https://karmainbox.github.io/pricing">Pricing</a>
           </p>
           <p>Follow us on <a href="https://x.com/sharoonbabu" target="_blank">X</a></p>
         </footer>
       </div>

       <!-- Paddle.js Integration -->
       <script src="https://cdn.paddle.com/paddle/v2/paddle.js"></script>
       <script>
         // Initialize Paddle with your client-side token
         Paddle.Environment.set("production"); // Change to "production" when ready
         Paddle.Initialize({
           token: 'live_4faf15ab97a2edaab5a6d114dca' // Your sandbox client-side token
         });

         // Check for transaction parameter in URL
         function checkForTransaction() {
           const urlParams = new URLSearchParams(window.location.search);
           const transactionId = urlParams.get('_ptxn');

           if (transactionId) {
             console.log('üéØ Transaction ID found:', transactionId);
             handleCheckout(transactionId);
           }
         }

         // Handle checkout process
         function handleCheckout(transactionId) {
           // Hide main content and show loading
           document.getElementById('mainContent').style.display = 'none';
           document.getElementById('checkoutLoading').style.display = 'block';
          checkoutSuccessful = false;

           try {
             // Open Paddle checkout for the transaction
             Paddle.Checkout.open({
               transactionId: transactionId,
               onSuccess: function(data) {
                 console.log('‚úÖ Checkout success:', data);
                checkoutSuccessful = true;
                 showCheckoutSuccess();
               },
               onError: function(error) {
                 console.error('‚ùå Checkout error:', error);
                 showCheckoutError(error.message || 'Checkout failed');
               },
               onClose: function() {
                     console.log('üîÑ Checkout modal closed - redirecting to main site');
                     // Always redirect to main site when modal is closed
                     if (!checkoutSuccessful) {
                         console.log('Checkout was not successful, redirecting to main site');
                         setTimeout(() => {
                             window.location.href = 'https://karmainbox.github.io/';
                         }, 500);
                     }
               }
             });
           } catch (error) {
             console.error('‚ùå Error opening checkout:', error);
             showCheckoutError('Failed to open checkout');
           }
         }

         // Show checkout success
         function showCheckoutSuccess() {
           document.getElementById('checkoutLoading').style.display = 'none';
           document.getElementById('checkoutError').style.display = 'none';
           document.getElementById('checkoutSuccess').style.display = 'block';

           // Notify parent window if in popup/iframe
           if (window.parent !== window) {
             window.parent.postMessage({ type: 'CHECKOUT_SUCCESS' }, '*');
           }
         }

         // Show checkout error
         function showCheckoutError(message) {
           document.getElementById('checkoutLoading').style.display = 'none';
           document.getElementById('checkoutSuccess').style.display = 'none';
           document.getElementById('errorMessage').textContent = message;
           document.getElementById('checkoutError').style.display = 'block';

           // Notify parent window if in popup/iframe
           if (window.parent !== window) {
             window.parent.postMessage({ type: 'CHECKOUT_ERROR', message: message }, '*');
           }
         }

         // Close checkout and return to extension
         function closeCheckoutAndReturnToExtension() {
           // Try to close the tab if opened from extension
           if (window.history.length <= 1) {
             window.close();
           } else {
             // Redirect to main site
             window.location.href = 'https://karmainbox.github.io/';
           }
         }

         // Initialize when page loads
         document.addEventListener('DOMContentLoaded', function() {
           checkForTransaction();
         });
       </script>

     </body>
     </html>
